<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Manage Customers - CSC</title>
        

    <link rel="stylesheet" th:href="@{/css/pages/csc-manage-customers.css}" href="/css/pages/csc-manage-customers.css">
</head>
<body>
<div th:replace="~{fragments/layout :: header}"></div>

<div class="wrap">
    <div class="header">
        <h2>Manage Customers</h2>
        <div class="header-actions">
            <a class="btn" th:href="@{/csc/dashboard}">Back to Dashboard</a>
        </div>
    </div>
    <div th:if="${success}" class="notice success" th:text="${success}">Success</div>
    <div th:if="${error}" class="notice error" th:text="${error}">Error</div>

    <div class="panel" id="manual-customer">
        <h3 class="panel-title">Add Customer Manually</h3>
        <form th:action="@{/csc/customers/manual}" method="post" class="form-grid">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <input class="field" type="text" name="fullName" placeholder="Full Name" required>
            <input class="field" type="email" name="email" placeholder="Email" required>
            <input class="field" type="text" name="mobile" placeholder="Mobile (10 digits)" pattern="[0-9]{10}" maxlength="10" required>
            <input class="field" type="text" name="password" placeholder="Password" required>
            <div style="grid-column: 1 / -1;">
                <button class="btn btn-manual" type="submit">Create & Activate Customer</button>
            </div>
        </form>
    </div>

    <div class="panel">
        <h3 class="panel-title">Deactivated Customers</h3>
        <div style="padding: 12px 14px 0;">
            <p class="section-note">Activate to re-enable login access, or delete customer record.</p>
        </div>
        <div class="table-wrap">
            <table>
                <thead>
                <tr>
                    <th>Customer ID</th>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${#lists.isEmpty(deactivatedCustomers)}">
                    <td colspan="5" style="text-align:center;">No deactivated customers found.</td>
                </tr>
                <tr th:each="c : ${deactivatedCustomers}">
                    <td th:text="${c.id}">1</td>
                    <td th:text="${c.fullName != null ? c.fullName : '-'}">Name</td>
                    <td th:text="${c.email != null ? c.email : '-'}">mail@x.com</td>
                    <td th:text="${c.mobile != null ? c.mobile : '-'}">9999999999</td>
                    <td style="display:flex; gap:8px; flex-wrap:wrap;">
                        <a class="approve" th:href="@{'/csc/approve-customer/' + ${c.id}}">Activate</a>
                        <a class="approve remove" th:href="@{'/csc/remove-customer/' + ${c.id}}">Delete</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="panel">
        <h3 class="panel-title">Customer Management (Active Customers)</h3>
        <div class="table-wrap">
            <table>
                <thead>
                <tr>
                    <th>Customer ID</th>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${#lists.isEmpty(activeCustomers)}">
                    <td colspan="6" style="text-align:center;">No active customers found.</td>
                </tr>
                <tr th:each="c : ${activeCustomers}">
                    <td th:text="${c.id}">1</td>
                    <td th:text="${c.fullName != null ? c.fullName : '-'}">Name</td>
                    <td th:text="${c.email != null ? c.email : '-'}">mail@x.com</td>
                    <td th:text="${c.mobile != null ? c.mobile : '-'}">9999999999</td>
                    <td>ACTIVE</td>
                    <td style="display:flex; gap:8px; flex-wrap:wrap;">
                        <a class="deactivate" th:href="@{'/csc/deactivate-customer/' + ${c.id}}">Deactivate</a>
                        <a class="approve remove" th:href="@{'/csc/remove-customer/' + ${c.id}}">Delete</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div th:replace="~{fragments/layout :: footer}"></div>
</body>
</html>


