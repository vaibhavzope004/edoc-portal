<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - E-DocServices</title>
        

    <link rel="stylesheet" th:href="@{/css/pages/admin-dashboard.css}" href="/css/pages/admin-dashboard.css">
</head>
<body>
<div class="topbar">
    <img src="/images/DashbordCopy.png" th:src="@{/images/DashbordCopy.png}" alt="E-DocServices Header">
</div>

<div class="wrap">
    <div class="header-row">
        <div class="title-block">
            <h2>CSC Administration Dashboard</h2>
            <p>Manage CSC onboarding, requests, and approval lifecycle.</p>
        </div>
        <a class="logout" th:href="@{/admin/logout}">Logout</a>
    </div>

    <div th:if="${success}" class="notice success" th:text="${success}">Success message</div>
    <div th:if="${error}" class="notice error" th:text="${error}">Error message</div>

    <div class="panel">
        <h3 class="panel-title">Add CSC User Manually</h3>
        <form th:action="@{/admin/csc-users/manual}" method="post" class="form-grid">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <input type="text" name="cscPortalName" placeholder="CSC Portal Name" required>
            <input type="text" name="ownerName" placeholder="Owner Name" required>
            <input type="text" name="cscId" placeholder="CSC ID (12 Digits)" pattern="[0-9]{12}" maxlength="12" required>
            <input type="text" name="mobileNumber" placeholder="Mobile Number" pattern="[0-9]{10}" maxlength="10" required>
            <input type="text" name="cscCenterAddress" placeholder="CSC Center Address" required>
            <input type="email" name="usernameEmail" placeholder="Username (Email)" required>
            <input type="text" name="password" placeholder="Password" required>
            <button type="submit">Create CSC User</button>
        </form>
    </div>

    <div class="panel">
        <h3 class="panel-title">Active CSC Users / Requests</h3>
        <div class="table-wrap">
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>CSC Portal Name</th>
                    <th>Owner Name</th>
                    <th>CSC ID</th>
                    <th>Mobile</th>
                    <th>CSC Center Address</th>
                    <th>Username (Email)</th>
                    <th>Password</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${#lists.isEmpty(activeCscRequests)}">
                    <td colspan="10" style="text-align:center;">No active CSC requests available.</td>
                </tr>
                <tr th:each="req : ${activeCscRequests}">
                    <td th:text="${req.id}">1</td>
                    <td th:text="${req.cscPortalName}">Sample Portal</td>
                    <td th:text="${req.ownerName}">Owner</td>
                    <td th:text="${req.cscId}">123456789012</td>
                    <td th:text="${req.mobileNumber}">9999999999</td>
                    <td th:text="${req.cscCenterAddress}">Address</td>
                    <td th:text="${req.usernameEmail}">owner@mail.com</td>
                    <td>********</td>
                    <td>
                        <span class="badge"
                              th:classappend="${req.status == 'ACTIVE'} ? ' approved' : (${req.status == 'DELETED'} ? ' deleted' : ' pending')"
                              th:text="${req.status}">PENDING</span>
                    </td>
                    <td class="action-cell">
                        <a class="approve-btn"
                           th:if="${req.status != 'ACTIVE'}"
                           th:href="@{'/admin/csc-users/request/approve/' + ${req.id}}">Activate</a>
                        <a class="edit-btn"
                           th:href="@{'/admin/csc-users/edit/' + ${req.id}}">Update Details</a>
                        <a class="delete-btn"
                           th:if="${req.status == 'ACTIVE'}"
                           th:href="@{'/admin/csc-users/delete/' + ${req.id}}">Deactivate</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="panel">
        <h3 class="panel-title">Deactivated CSC Users</h3>
        <div class="table-wrap">
            <table>
                <thead>
                <tr>
                    <th>ID</th>
                    <th>CSC Portal Name</th>
                    <th>Owner Name</th>
                    <th>CSC ID</th>
                    <th>Mobile</th>
                    <th>CSC Center Address</th>
                    <th>Username (Email)</th>
                    <th>Password</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${#lists.isEmpty(deletedCscRequests)}">
                    <td colspan="10" style="text-align:center;">No deactivated CSC users.</td>
                </tr>
                <tr th:each="req : ${deletedCscRequests}">
                    <td th:text="${req.id}">1</td>
                    <td th:text="${req.cscPortalName}">Sample Portal</td>
                    <td th:text="${req.ownerName}">Owner</td>
                    <td th:text="${req.cscId}">123456789012</td>
                    <td th:text="${req.mobileNumber}">9999999999</td>
                    <td th:text="${req.cscCenterAddress}">Address</td>
                    <td th:text="${req.usernameEmail}">owner@mail.com</td>
                    <td>********</td>
                    <td><span class="badge deleted" th:text="${req.status}">DELETED</span></td>
                    <td class="action-cell">
                        <a class="approve-btn"
                           th:href="@{'/admin/csc-users/request/approve/' + ${req.id}}">Re-Activate</a>
                        <a class="edit-btn"
                           th:href="@{'/admin/csc-users/edit/' + ${req.id}}">Update Details</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<div class="footer">
    <b>Contact Us:</b><br>
    Vaibhav Zope<br>
    Muktainagar, Maharashtra - 425306
</div>
</body>
</html>


